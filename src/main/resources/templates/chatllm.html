<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat LLM</title>

    <head th:replace="~{common_headscript.html :: common_headscript}"></head>


    <!-- 스크립트 비동기 로드 (렌더링 성능 개선) -->
    <link rel="stylesheet" th:href="@{../css/PHG_css/download/github.min.css}">
    <script th:src="@{../js/PHG/Download/marked.min.js}" defer></script>
    <script th:src="@{../js/PHG/Download/highlight.min.js}" defer></script>
    <script th:src="@{../js/PHG/Download/purify.min.js}" defer></script>
    <script th:src="@{../js/sh_js/sh_chatllm.js}" defer></script>
    <link rel="stylesheet" th:href="@{/css/sh_css/sh_chatllm.css}">
</head>

<body>
    <div th:replace="~{header.html}"></div> <!-- Header 삽입 -->
    <div th:insert="~{sidebar.html}"></div>
    <div id="main_container">
        <div class="chatllm_container">
            <div class="chatllm_header">
                <h1>Chat LLM</h1>
            </div>
            <hr>
            <div class="chatllm_content">
                <div class="chat_log">
                    <div class="chat-history translation-mode" id="chat-history" aria-live="polite"></div>

                </div>
                <div class="chat_input">
                    <!-- 채팅 래퍼: 채팅 히스토리와 입력 영역 포함 -->
                    <div class="chat-wrapper">
                        <!-- 세션 ID 저장용 히든 입력 필드 -->
                        <input type="hidden" id="chat-session" value="">

                        <!-- AI 모델 선택 드롭다운 -->
                        <div class="chat-option">

                            <div class="model-selection">
                                <label for="ai-model" class="sr-only">AI 모델 선택</label>
                                <select id="ai-model" class="model-select">
                                    <option value="deepseek-r1:1.5b">DeepSeek R1 1.5B</option>
                                    <option value="deepseek-r1:8b">DeepSeek R1 8B</option>
                                    <option value="deepseek-r1:14b">DeepSeek R1 14B</option>
                                    <option value="deepseek-r1:32b">DeepSeek R1 32B</option>
                                </select>
                                <!-- 번역 토글 체크박스 -->
                            </div>
                            <div class="translation-toggle">
                                <input type="checkbox" id="translation-switch" class="translation-checkbox" checked>
                                <label for="translation-switch" class="translation-label">번역 보기</label>
                            </div>
                        </div>
                        <!-- 메시지 입력 영역 -->
                        <div class="chat-input-wrapper">
                            <textarea id="chat-input" class="chat-input" placeholder="메시지를 입력하세요..." rows="3"
                                aria-describedby="send-message-btn"></textarea>
                            <button id="send-message-btn" class="send-btn" aria-label="메시지 보내기">전송</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{footer.html}"></div> <!-- Footer 삽입 -->
</body>

</html>